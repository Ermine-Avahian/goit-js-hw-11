{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '45375111-d1e8183fd09326f55157dfb1e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (data.totalHits === 0) {\n      throw new Error('No images found');\n    }\n\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","export function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => createCardMarkup(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createCardMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\"/>\n      <div class=\"gallery__info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showNotification(message, type = 'info') {\n  iziToast[type]({\n    title: message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('visible');\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('visible');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showNotification,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (query === '') {\n    showNotification('Please enter a search query', 'warning');\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  await fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    showLoader();\n    const data = await fetchImages(query, page);\n    renderGallery(data.hits);\n\n    if (data.totalHits > 12) {\n      observeLoadMore();\n    }\n\n    new SimpleLightbox('.gallery a').refresh();\n  } catch (error) {\n    showNotification(error.message, 'error');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction observeLoadMore() {\n  const options = {\n    root: null,\n    rootMargin: '0px',\n    threshold: 0.5,\n  };\n\n  const observer = new IntersectionObserver(async entries => {\n    if (entries[0].isIntersecting) {\n      page += 1;\n      await fetchAndRenderImages();\n    }\n  }, options);\n\n  observer.observe(document.querySelector('.load-more'));\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","data","error","renderGallery","images","gallery","markup","image","createCardMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showNotification","message","type","showLoader","hideLoader","form","event","fetchAndRenderImages","observeLoadMore","SimpleLightbox","options","entries"],"mappings":"svBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAE1F,GAAI,CAEF,MAAME,EAAO,MADI,MAAM,MAAMD,CAAG,GACJ,OAE5B,GAAIC,EAAK,YAAc,EACrB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,CACR,OAAQC,EAAO,CACd,MAAMA,CACP,CACH,CCpBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAASC,EAAiBD,CAAK,CAAC,EAAE,KAAK,EAAE,EACnEF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEA,SAASE,EAAiB,CACxB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,eACML,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,2BAEjBC,CAAK;AAAA,2BACLC,CAAK;AAAA,8BACFC,CAAQ;AAAA,+BACPC,CAAS;AAAA;AAAA;AAAA,GAIxC,CAEO,SAASC,GAAe,CAC7B,MAAMX,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CAEO,SAASY,EAAiBC,EAASC,EAAO,OAAQ,CACvD,SAASA,CAAI,EAAE,CACb,MAAOD,EACP,SAAU,UACd,CAAG,CACH,CAEO,SAASE,GAAa,CACZ,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,SAAS,CAChC,CAEO,SAASC,GAAa,CACZ,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,SAAS,CACnC,CCnCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAClD,IAAIzB,EAAQ,GACRC,EAAO,EAEXwB,EAAK,iBAAiB,SAAU,MAAMC,GAAS,CAI7C,GAHAA,EAAM,eAAc,EACpB1B,EAAQ0B,EAAM,cAAc,SAAS,YAAY,MAAM,OAEnD1B,IAAU,GAAI,CAChBoB,EAAiB,8BAA+B,SAAS,EACzD,MACD,CAEDD,IACAlB,EAAO,EACP,MAAM0B,EAAoB,CAC5B,CAAC,EAED,eAAeA,GAAuB,CACpC,GAAI,CACFJ,IACA,MAAMnB,EAAO,MAAML,EAAYC,EAAOC,CAAI,EAC1CK,EAAcF,EAAK,IAAI,EAEnBA,EAAK,UAAY,IACnBwB,IAGF,IAAIC,EAAe,YAAY,EAAE,SAClC,OAAQxB,EAAO,CACde,EAAiBf,EAAM,QAAS,OAAO,CAC3C,QAAY,CACRmB,GACD,CACH,CAEA,SAASI,GAAkB,CACzB,MAAME,EAAU,CACd,KAAM,KACN,WAAY,MACZ,UAAW,EACf,EAEmB,IAAI,qBAAqB,MAAMC,GAAW,CACrDA,EAAQ,CAAC,EAAE,iBACb9B,GAAQ,EACR,MAAM0B,EAAoB,EAE7B,EAAEG,CAAO,EAED,QAAQ,SAAS,cAAc,YAAY,CAAC,CACvD"}