{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '45375111-d1e8183fd09326f55157dfb1e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (data.totalHits === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    }\n\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\n\nexport function renderGallery(images, galleryElement) {\n  const markup = images.map(image => createCardMarkup(image)).join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createCardMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\"/>\n      <div class=\"gallery__info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showNotification(message, type = 'info') {\n  iziToast[type]({\n    title: type.charAt(0).toUpperCase() + type.slice(1),\n    message: message,\n    position: 'topRight',\n    backgroundColor: '#ef4040',\n    titleColor: '#fafafb',\n    messageColor: '#fafafb',\n    borderBottom: '2px solid #ffbebe',\n    borderRadius: '4px',\n    padding: '20px',\n    width: '432px',\n    height: '88px',\n    fontSize: '16px',\n    fontWeight: '400',\n    lineHeight: '1.5',\n    letterSpacing: '0.03em',\n    messageMaxWidth: '100%',\n    messageOverflow: 'hidden',\n    wordBreak: 'break-word',\n    wordWrap: 'break-word',\n  });\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('visible');\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('visible');\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  clearGallery,\n  showNotification,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst galleryElement = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\nconst loadMoreElement = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (query === '') {\n    showNotification('Please enter a search query', 'warning');\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  await fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    showLoader();\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0) {\n      showNotification(\n        'Sorry, there are no images matching your search query. Please, try again!',\n        'error'\n      );\n      return;\n    }\n\n    renderGallery(data.hits, galleryElement);\n    lightbox.refresh();\n\n    if (data.totalHits > 12) {\n      observeLoadMore();\n    }\n  } catch (error) {\n    showNotification(error.message, 'error');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction observeLoadMore() {\n  const options = {\n    root: null,\n    rootMargin: '0px',\n    threshold: 0.5,\n  };\n\n  const observer = new IntersectionObserver(async entries => {\n    if (entries[0].isIntersecting) {\n      page += 1;\n      await fetchAndRenderImages();\n    }\n  }, options);\n\n  observer.observe(loadMoreElement);\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","data","error","renderGallery","images","galleryElement","markup","image","createCardMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","gallery","showNotification","message","type","iziToast","showLoader","hideLoader","form","loadMoreElement","lightbox","SimpleLightbox","event","fetchAndRenderImages","observeLoadMore","options","entries"],"mappings":"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"}